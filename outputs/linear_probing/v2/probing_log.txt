
================================================================================
LINEAR PROBING ANALYSIS PIPELINE
================================================================================
[15:53:26] Start time: 2025-11-17 15:53:26

================================================================================
LOADING DATA
================================================================================
[15:53:26] Loading metadata...
  • Total sentences: 33522
[15:53:26] Loading base layer 6...
  •   Shape: (33522, 1536)
[15:53:26] Loading base layer 12...
  •   Shape: (33522, 1536)
[15:53:26] Loading base layer 18...
  •   Shape: (33522, 1536)
[15:53:26] Loading instruct layer 6...
  •   Shape: (33522, 1536)
[15:53:26] Loading instruct layer 12...
  •   Shape: (33522, 1536)
[15:53:27] Loading instruct layer 18...
  •   Shape: (33522, 1536)
[15:53:27] 
Preparing labels...
  • Attributes: 16
  • States: 36
[15:53:27] 
Label distributions:
  • Attribute balance: {'Tourism': 5613, 'History': 3528, 'Cultural_Common_Sense': 3363, 'Festivals': 3267, 'Cuisine': 3177, 'Dance_and_Music': 2874, 'Art': 2781, 'Costume': 2103, 'Rituals_and_Ceremonies': 2019, 'Language': 1710, 'Personalities': 1482, 'Religion': 888, 'Sports': 342, 'Transport': 183, 'Medicine': 135, 'Nightlife': 57}
  • State balance: {'Telangana': 2889, 'Uttarakhand': 1806, 'Tamil_Nadu': 1590, 'Sikkim': 1485, 'Tripura': 1449, 'Manipur': 1449, 'Arunachal_Pradesh': 1431, 'Himachal_Pradesh': 1422, 'Jharkhand': 1389, 'Karnataka': 1308}
  • Base correctness: 22242/33522
  • Instruct correctness: 21399/33522

================================================================================
CREATING TRAIN/TEST SPLITS
================================================================================
  • Train size: 26817
  • Test size: 6705
[15:53:27] 
Group distribution in splits:
  •   suppression: Train: 35.60%, Test: 35.60%
  •   enhancement: Train: 35.71%, Test: 35.70%
  •   control: Train: 28.69%, Test: 28.70%

================================================================================
PROBE 1: ATTRIBUTE CLASSIFICATION (16-CLASS)
================================================================================
[15:53:27] 
BASE Layer 6
  • Accuracy: 0.8203
  • Precision: 0.8218
  • Recall: 0.8203
  • F1: 0.8208
  • CV Accuracy: 0.8161 ± 0.0040
[16:02:42] 
BASE Layer 12
  • Accuracy: 0.7940
  • Precision: 0.7975
  • Recall: 0.7940
  • F1: 0.7955
  • CV Accuracy: 0.7951 ± 0.0056
[16:13:20] 
BASE Layer 18
  • Accuracy: 0.7928
  • Precision: 0.7938
  • Recall: 0.7928
  • F1: 0.7932
  • CV Accuracy: 0.7997 ± 0.0032
[16:23:47] 
INSTRUCT Layer 6
  • Accuracy: 0.8174
  • Precision: 0.8186
  • Recall: 0.8174
  • F1: 0.8179
  • CV Accuracy: 0.8149 ± 0.0054
[16:33:37] 
INSTRUCT Layer 12
  • Accuracy: 0.7960
  • Precision: 0.7987
  • Recall: 0.7960
  • F1: 0.7971
  • CV Accuracy: 0.7959 ± 0.0057
[16:44:39] 
INSTRUCT Layer 18
  • Accuracy: 0.7916
  • Precision: 0.7931
  • Recall: 0.7916
  • F1: 0.7922
  • CV Accuracy: 0.7977 ± 0.0047

================================================================================
PROBE 2: CORRECTNESS PREDICTION (BINARY)
================================================================================
[16:56:01] 
BASE Layer 6
  • Accuracy: 0.6333
  • Precision: 0.6707
  • Recall: 0.6333
  • F1: 0.6432
  • ROC-AUC: 0.6750
  • CV Accuracy: 0.6235 ± 0.0058
[16:57:58] 
BASE Layer 12
  • Accuracy: 0.6403
  • Precision: 0.6772
  • Recall: 0.6403
  • F1: 0.6500
  • ROC-AUC: 0.6899
  • CV Accuracy: 0.6239 ± 0.0062
[16:59:31] 
BASE Layer 18
  • Accuracy: 0.6265
  • Precision: 0.6671
  • Recall: 0.6265
  • F1: 0.6369
  • ROC-AUC: 0.6844
  • CV Accuracy: 0.6227 ± 0.0044
[17:01:48] 
INSTRUCT Layer 6
  • Accuracy: 0.6261
  • Precision: 0.6583
  • Recall: 0.6261
  • F1: 0.6343
  • ROC-AUC: 0.6749
  • CV Accuracy: 0.6233 ± 0.0075
[17:03:47] 
INSTRUCT Layer 12
  • Accuracy: 0.6197
  • Precision: 0.6541
  • Recall: 0.6197
  • F1: 0.6282
  • ROC-AUC: 0.6704
  • CV Accuracy: 0.6140 ± 0.0015
[17:05:45] 
INSTRUCT Layer 18
  • Accuracy: 0.6246
  • Precision: 0.6593
  • Recall: 0.6246
  • F1: 0.6330
  • ROC-AUC: 0.6755
  • CV Accuracy: 0.6183 ± 0.0066

================================================================================
PROBE 3: STATE CLASSIFICATION (36-CLASS)
================================================================================
[17:07:30] 
BASE Layer 6
  • Accuracy: 0.9573
  • Precision: 0.9576
  • Recall: 0.9573
  • F1: 0.9574
  • CV Accuracy: 0.9538 ± 0.0014
[17:08:47] 
BASE Layer 12
  • Accuracy: 0.9147
  • Precision: 0.9150
  • Recall: 0.9147
  • F1: 0.9146
  • CV Accuracy: 0.9146 ± 0.0042
[17:10:24] 
BASE Layer 18
  • Accuracy: 0.9023
  • Precision: 0.9027
  • Recall: 0.9023
  • F1: 0.9022
  • CV Accuracy: 0.9075 ± 0.0017
[17:12:42] 
INSTRUCT Layer 6
  • Accuracy: 0.9573
  • Precision: 0.9576
  • Recall: 0.9573
  • F1: 0.9574
  • CV Accuracy: 0.9540 ± 0.0027
[17:13:51] 
INSTRUCT Layer 12
  • Accuracy: 0.9133
  • Precision: 0.9134
  • Recall: 0.9133
  • F1: 0.9131
  • CV Accuracy: 0.9153 ± 0.0029
[17:15:51] 
INSTRUCT Layer 18
  • Accuracy: 0.9051
  • Precision: 0.9055
  • Recall: 0.9051
  • F1: 0.9050
  • CV Accuracy: 0.9087 ± 0.0027

================================================================================
PROBE 4: CROSS-MODEL TRANSFER (CRITICAL TEST)
================================================================================
[17:17:45] 
Layer 6: Train on Base → Test on Instruct
[17:17:45] 
  Attribute Transfer:
  •   Base → Base: 0.8203
  •   Base → Instruct: 0.8082
  •   Transfer Rate: 0.9853 (-1.47%)
[17:19:18] 
  Correctness Transfer (Base):
  •   Base → Base: 0.6333
  •   Base → Instruct: 0.5970
  •   Transfer Rate: 0.9428
[17:19:31] 
  State Transfer:
  •   Base → Base: 0.9573
  •   Base → Instruct: 0.9559
  •   Transfer Rate: 0.9984
[17:19:47] 
Layer 12: Train on Base → Test on Instruct
[17:19:47] 
  Attribute Transfer:
  •   Base → Base: 0.7940
  •   Base → Instruct: 0.7790
  •   Transfer Rate: 0.9810 (-1.90%)
[17:21:19] 
  Correctness Transfer (Base):
  •   Base → Base: 0.6403
  •   Base → Instruct: 0.6231
  •   Transfer Rate: 0.9732
[17:21:36] 
  State Transfer:
  •   Base → Base: 0.9147
  •   Base → Instruct: 0.9098
  •   Transfer Rate: 0.9946
[17:21:50] 
Layer 18: Train on Base → Test on Instruct
[17:21:50] 
  Attribute Transfer:
  •   Base → Base: 0.7928
  •   Base → Instruct: 0.7724
  •   Transfer Rate: 0.9742 (-2.58%)
[17:23:41] 
  Correctness Transfer (Base):
  •   Base → Base: 0.6265
  •   Base → Instruct: 0.6225
  •   Transfer Rate: 0.9936
[17:24:02] 
  State Transfer:
  •   Base → Base: 0.9023
  •   Base → Instruct: 0.8952
  •   Transfer Rate: 0.9921

================================================================================
PROBE 5: MULTI-TASK JOINT PROBING
================================================================================
[17:24:20] 
BASE Layer 6
[17:24:20]   Strategy 1: Independent Probes
  •     Attribute: 0.8203
  •     Correctness: 0.6333
  •     State: 0.9573
  •     Average: 0.8036
[17:26:55]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.8204
  •     Correctness: 0.6336
  •     State: 0.9573
  •     Average: 0.8038
[17:27:26]   Comparison:
  •     Attribute Δ: +0.0001
  •     Correctness Δ: +0.0003
  •     State Δ: +0.0000
[17:27:26] 
BASE Layer 12
[17:27:26]   Strategy 1: Independent Probes
  •     Attribute: 0.7940
  •     Correctness: 0.6403
  •     State: 0.9147
  •     Average: 0.7830
[17:29:06]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.7933
  •     Correctness: 0.6401
  •     State: 0.9147
  •     Average: 0.7827
[17:29:40]   Comparison:
  •     Attribute Δ: -0.0007
  •     Correctness Δ: -0.0001
  •     State Δ: +0.0000
[17:29:40] 
BASE Layer 18
[17:29:40]   Strategy 1: Independent Probes
  •     Attribute: 0.7928
  •     Correctness: 0.6265
  •     State: 0.9023
  •     Average: 0.7739
[17:31:29]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.7940
  •     Correctness: 0.6252
  •     State: 0.9023
  •     Average: 0.7739
[17:32:00]   Comparison:
  •     Attribute Δ: +0.0012
  •     Correctness Δ: -0.0013
  •     State Δ: +0.0000
[17:32:00] 
INSTRUCT Layer 6
[17:32:01]   Strategy 1: Independent Probes
  •     Attribute: 0.8174
  •     Correctness: 0.6261
  •     State: 0.9573
  •     Average: 0.8003
[17:34:07]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.8182
  •     Correctness: 0.6262
  •     State: 0.9573
  •     Average: 0.8006
[17:34:31]   Comparison:
  •     Attribute Δ: +0.0007
  •     Correctness Δ: +0.0001
  •     State Δ: +0.0000
[17:34:31] 
INSTRUCT Layer 12
[17:34:32]   Strategy 1: Independent Probes
  •     Attribute: 0.7960
  •     Correctness: 0.6197
  •     State: 0.9133
  •     Average: 0.7763
[17:37:01]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.7952
  •     Correctness: 0.6204
  •     State: 0.9133
  •     Average: 0.7763
[17:37:30]   Comparison:
  •     Attribute Δ: -0.0007
  •     Correctness Δ: +0.0007
  •     State Δ: +0.0000
[17:37:30] 
INSTRUCT Layer 18
[17:37:31]   Strategy 1: Independent Probes
  •     Attribute: 0.7916
  •     Correctness: 0.6246
  •     State: 0.9051
  •     Average: 0.7738
[17:39:41]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.7922
  •     Correctness: 0.6243
  •     State: 0.9051
  •     Average: 0.7739
[17:40:13]   Comparison:
  •     Attribute Δ: +0.0006
  •     Correctness Δ: -0.0003
  •     State Δ: +0.0000

================================================================================
GROUP-WISE ANALYSIS
================================================================================
[17:40:13] 
BASE Layer 6
  •   suppression: Attr: 0.8211, Corr: 0.5769
  •   enhancement: Attr: 0.8129, Corr: 0.6153
  •   control: Attr: 0.8285, Corr: 0.7256
[17:41:51] 
BASE Layer 12
  •   suppression: Attr: 0.7943, Corr: 0.5857
  •   enhancement: Attr: 0.7903, Corr: 0.6170
  •   control: Attr: 0.7983, Corr: 0.7370
[17:44:05] 
BASE Layer 18
  •   suppression: Attr: 0.7922, Corr: 0.5744
  •   enhancement: Attr: 0.7853, Corr: 0.6115
  •   control: Attr: 0.8030, Corr: 0.7100
[17:46:53] 
INSTRUCT Layer 6
  •   suppression: Attr: 0.8173, Corr: 0.5978
  •   enhancement: Attr: 0.8124, Corr: 0.5773
  •   control: Attr: 0.8238, Corr: 0.7219
[17:49:01] 
INSTRUCT Layer 12
  •   suppression: Attr: 0.7935, Corr: 0.5903
  •   enhancement: Attr: 0.7916, Corr: 0.5739
  •   control: Attr: 0.8046, Corr: 0.7131
[17:52:07] 
INSTRUCT Layer 18
  •   suppression: Attr: 0.7868, Corr: 0.5945
  •   enhancement: Attr: 0.7870, Corr: 0.5781
  •   control: Attr: 0.8035, Corr: 0.7199

================================================================================
CREATING VISUALIZATIONS
================================================================================
[17:54:40] ✓ Saved probe accuracies plot
[17:54:41] ✓ Saved cross-model transfer plot
[17:54:43] ✓ Saved group-wise performance plot
[17:54:43] ✓ Saved transfer rate heatmap

================================================================================
GENERATING SUMMARY REPORT
================================================================================
[17:54:43] ✓ Summary report saved
[17:54:43] ✓ Label encoders saved

================================================================================
PIPELINE COMPLETE
================================================================================
[17:54:43] End time: 2025-11-17 17:54:43
[17:54:43] Total duration: 121.3 minutes
[17:54:43] 
All outputs saved to:
[17:54:43]   /home/anshulk/cultural-alignment-study/outputs/linear_probing/v2
