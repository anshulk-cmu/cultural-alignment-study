
================================================================================
LINEAR PROBING ANALYSIS PIPELINE
================================================================================
[16:38:33] Start time: 2025-11-18 16:38:33

================================================================================
LOADING DATA
================================================================================
[16:38:33] Loading metadata...
  • Total sentences: 33522
[16:38:33] Loading base layer 8...
  •   Shape: (33522, 1536)
[16:38:34] Loading base layer 16...
  •   Shape: (33522, 1536)
[16:38:34] Loading base layer 24...
  •   Shape: (33522, 1536)
[16:38:35] Loading instruct layer 8...
  •   Shape: (33522, 1536)
[16:38:35] Loading instruct layer 16...
  •   Shape: (33522, 1536)
[16:38:35] Loading instruct layer 24...
  •   Shape: (33522, 1536)
[16:38:36] 
Preparing labels...
  • Attributes: 16
  • States: 36
[16:38:36] 
Label distributions:
  • Attribute balance: {'Tourism': 5613, 'History': 3528, 'Cultural_Common_Sense': 3363, 'Festivals': 3267, 'Cuisine': 3177, 'Dance_and_Music': 2874, 'Art': 2781, 'Costume': 2103, 'Rituals_and_Ceremonies': 2019, 'Language': 1710, 'Personalities': 1482, 'Religion': 888, 'Sports': 342, 'Transport': 183, 'Medicine': 135, 'Nightlife': 57}
  • State balance: {'Telangana': 2889, 'Uttarakhand': 1806, 'Tamil_Nadu': 1590, 'Sikkim': 1485, 'Tripura': 1449, 'Manipur': 1449, 'Arunachal_Pradesh': 1431, 'Himachal_Pradesh': 1422, 'Jharkhand': 1389, 'Karnataka': 1308}
  • Base correctness: 22242/33522
  • Instruct correctness: 21399/33522

================================================================================
CREATING TRAIN/TEST SPLITS
================================================================================
  • Train size: 25141
  • Test size: 8381
[16:38:36] 
Group distribution in splits:
  •   suppression: Train: 35.60%, Test: 35.60%
  •   enhancement: Train: 35.71%, Test: 35.71%
  •   control: Train: 28.69%, Test: 28.68%

================================================================================
PROBE 1: ATTRIBUTE CLASSIFICATION (16-CLASS)
================================================================================
[16:38:36] 
BASE Layer 8
  • Accuracy: 0.8067
  • Precision: 0.8094
  • Recall: 0.8067
  • F1: 0.8079
  • CV Accuracy: 0.8073 ± 0.0050
[16:42:02] 
BASE Layer 16
  • Accuracy: 0.7926
  • Precision: 0.7945
  • Recall: 0.7926
  • F1: 0.7934
  • CV Accuracy: 0.7976 ± 0.0031
[16:45:40] 
BASE Layer 24
  • Accuracy: 0.8409
  • Precision: 0.8411
  • Recall: 0.8409
  • F1: 0.8408
  • CV Accuracy: 0.8369 ± 0.0029
[16:49:18] 
INSTRUCT Layer 8
  • Accuracy: 0.8046
  • Precision: 0.8076
  • Recall: 0.8046
  • F1: 0.8059
  • CV Accuracy: 0.8083 ± 0.0052
[16:52:39] 
INSTRUCT Layer 16
  • Accuracy: 0.7901
  • Precision: 0.7923
  • Recall: 0.7901
  • F1: 0.7910
  • CV Accuracy: 0.7970 ± 0.0036
[16:56:10] 
INSTRUCT Layer 24
  • Accuracy: 0.8328
  • Precision: 0.8332
  • Recall: 0.8328
  • F1: 0.8329
  • CV Accuracy: 0.8377 ± 0.0026

================================================================================
PROBE 2: CORRECTNESS PREDICTION (BINARY)
================================================================================
[16:59:45] 
BASE Layer 8
  • Accuracy: 0.6294
  • Precision: 0.6658
  • Recall: 0.6294
  • F1: 0.6392
  • ROC-AUC: 0.6769
  • CV Accuracy: 0.6244 ± 0.0039
[17:01:23] 
BASE Layer 16
  • Accuracy: 0.6240
  • Precision: 0.6635
  • Recall: 0.6240
  • F1: 0.6342
  • ROC-AUC: 0.6741
  • CV Accuracy: 0.6238 ± 0.0070
[17:03:26] 
BASE Layer 24
  • Accuracy: 0.6252
  • Precision: 0.6641
  • Recall: 0.6252
  • F1: 0.6354
  • ROC-AUC: 0.6785
  • CV Accuracy: 0.6275 ± 0.0022
[17:05:48] 
INSTRUCT Layer 8
  • Accuracy: 0.6184
  • Precision: 0.6498
  • Recall: 0.6184
  • F1: 0.6265
  • ROC-AUC: 0.6670
  • CV Accuracy: 0.6183 ± 0.0089
[17:07:34] 
INSTRUCT Layer 16
  • Accuracy: 0.6227
  • Precision: 0.6553
  • Recall: 0.6227
  • F1: 0.6308
  • ROC-AUC: 0.6698
  • CV Accuracy: 0.6176 ± 0.0052
[17:09:23] 
INSTRUCT Layer 24
  • Accuracy: 0.6232
  • Precision: 0.6528
  • Recall: 0.6232
  • F1: 0.6310
  • ROC-AUC: 0.6719
  • CV Accuracy: 0.6166 ± 0.0048

================================================================================
PROBE 3: STATE CLASSIFICATION (36-CLASS)
================================================================================
[17:11:41] 
BASE Layer 8
  • Accuracy: 0.9394
  • Precision: 0.9398
  • Recall: 0.9394
  • F1: 0.9393
  • CV Accuracy: 0.9430 ± 0.0023
[17:12:10] 
BASE Layer 16
  • Accuracy: 0.9043
  • Precision: 0.9046
  • Recall: 0.9043
  • F1: 0.9041
  • CV Accuracy: 0.9085 ± 0.0032
[17:12:42] 
BASE Layer 24
  • Accuracy: 0.9604
  • Precision: 0.9607
  • Recall: 0.9604
  • F1: 0.9604
  • CV Accuracy: 0.9604 ± 0.0023
[17:13:10] 
INSTRUCT Layer 8
  • Accuracy: 0.9428
  • Precision: 0.9430
  • Recall: 0.9428
  • F1: 0.9428
  • CV Accuracy: 0.9434 ± 0.0025
[17:13:36] 
INSTRUCT Layer 16
  • Accuracy: 0.9060
  • Precision: 0.9062
  • Recall: 0.9060
  • F1: 0.9058
  • CV Accuracy: 0.9092 ± 0.0045
[17:14:10] 
INSTRUCT Layer 24
  • Accuracy: 0.9613
  • Precision: 0.9616
  • Recall: 0.9613
  • F1: 0.9614
  • CV Accuracy: 0.9618 ± 0.0021

================================================================================
PROBE 4: CROSS-MODEL TRANSFER (CRITICAL TEST)
================================================================================
[17:14:37] 
Layer 8: Train on Base → Test on Instruct
[17:14:37] 
  Attribute Transfer:
  •   Base → Base: 0.8067
  •   Base → Instruct: 0.7985
  •   Transfer Rate: 0.9898 (-1.02%)
[17:15:09] 
  Correctness Transfer (Base):
  •   Base → Base: 0.6294
  •   Base → Instruct: 0.5793
  •   Transfer Rate: 0.9204
[17:15:23] 
  State Transfer:
  •   Base → Base: 0.9394
  •   Base → Instruct: 0.9383
  •   Transfer Rate: 0.9989
[17:15:28] 
Layer 16: Train on Base → Test on Instruct
[17:15:28] 
  Attribute Transfer:
  •   Base → Base: 0.7926
  •   Base → Instruct: 0.7626
  •   Transfer Rate: 0.9621 (-3.79%)
[17:16:01] 
  Correctness Transfer (Base):
  •   Base → Base: 0.6240
  •   Base → Instruct: 0.6453
  •   Transfer Rate: 1.0340
[17:16:20] 
  State Transfer:
  •   Base → Base: 0.9043
  •   Base → Instruct: 0.8933
  •   Transfer Rate: 0.9879
[17:16:25] 
Layer 24: Train on Base → Test on Instruct
[17:16:25] 
  Attribute Transfer:
  •   Base → Base: 0.8409
  •   Base → Instruct: 0.8124
  •   Transfer Rate: 0.9661 (-3.39%)
[17:17:00] 
  Correctness Transfer (Base):
  •   Base → Base: 0.6252
  •   Base → Instruct: 0.6053
  •   Transfer Rate: 0.9681
[17:17:16] 
  State Transfer:
  •   Base → Base: 0.9604
  •   Base → Instruct: 0.9616
  •   Transfer Rate: 1.0012

================================================================================
PROBE 5: MULTI-TASK JOINT PROBING
================================================================================
[17:17:21] 
BASE Layer 8
[17:17:21]   Strategy 1: Independent Probes
  •     Attribute: 0.8067
  •     Correctness: 0.6294
  •     State: 0.9394
  •     Average: 0.7918
[17:18:13]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.8067
  •     Correctness: 0.6294
  •     State: 0.9394
  •     Average: 0.7918
[17:18:36]   Comparison:
  •     Attribute Δ: +0.0000
  •     Correctness Δ: +0.0000
  •     State Δ: +0.0000
[17:18:36] 
BASE Layer 16
[17:18:36]   Strategy 1: Independent Probes
  •     Attribute: 0.7926
  •     Correctness: 0.6240
  •     State: 0.9043
  •     Average: 0.7737
[17:19:35]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.7924
  •     Correctness: 0.6234
  •     State: 0.9043
  •     Average: 0.7734
[17:20:00]   Comparison:
  •     Attribute Δ: -0.0002
  •     Correctness Δ: -0.0006
  •     State Δ: +0.0000
[17:20:00] 
BASE Layer 24
[17:20:01]   Strategy 1: Independent Probes
  •     Attribute: 0.8409
  •     Correctness: 0.6252
  •     State: 0.9604
  •     Average: 0.8089
[17:20:59]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.8408
  •     Correctness: 0.6241
  •     State: 0.9604
  •     Average: 0.8085
[17:21:21]   Comparison:
  •     Attribute Δ: -0.0001
  •     Correctness Δ: -0.0011
  •     State Δ: +0.0000
[17:21:21] 
INSTRUCT Layer 8
[17:21:21]   Strategy 1: Independent Probes
  •     Attribute: 0.8046
  •     Correctness: 0.6184
  •     State: 0.9428
  •     Average: 0.7886
[17:22:10]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.8055
  •     Correctness: 0.6200
  •     State: 0.9428
  •     Average: 0.7894
[17:22:32]   Comparison:
  •     Attribute Δ: +0.0010
  •     Correctness Δ: +0.0016
  •     State Δ: +0.0000
[17:22:32] 
INSTRUCT Layer 16
[17:22:32]   Strategy 1: Independent Probes
  •     Attribute: 0.7901
  •     Correctness: 0.6227
  •     State: 0.9060
  •     Average: 0.7729
[17:23:38]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.7898
  •     Correctness: 0.6228
  •     State: 0.9060
  •     Average: 0.7729
[17:23:59]   Comparison:
  •     Attribute Δ: -0.0004
  •     Correctness Δ: +0.0001
  •     State Δ: +0.0000
[17:23:59] 
INSTRUCT Layer 24
[17:23:59]   Strategy 1: Independent Probes
  •     Attribute: 0.8328
  •     Correctness: 0.6232
  •     State: 0.9613
  •     Average: 0.8058
[17:24:53]   Strategy 2: Joint Multi-Task
  •     Attribute: 0.8347
  •     Correctness: 0.6224
  •     State: 0.9613
  •     Average: 0.8061
[17:25:14]   Comparison:
  •     Attribute Δ: +0.0019
  •     Correctness Δ: -0.0008
  •     State Δ: +0.0000

================================================================================
GROUP-WISE ANALYSIS
================================================================================
[17:25:14] 
BASE Layer 8
  •   suppression: Attr: 0.8006, Corr: 0.5741
  •   enhancement: Attr: 0.8106, Corr: 0.6121
  •   control: Attr: 0.8095, Corr: 0.7196
[17:25:59] 
BASE Layer 16
  •   suppression: Attr: 0.7905, Corr: 0.5744
  •   enhancement: Attr: 0.7918, Corr: 0.6104
  •   control: Attr: 0.7962, Corr: 0.7026
[17:26:58] 
BASE Layer 24
  •   suppression: Attr: 0.8361, Corr: 0.5717
  •   enhancement: Attr: 0.8450, Corr: 0.6108
  •   control: Attr: 0.8419, Corr: 0.7097
[17:27:56] 
INSTRUCT Layer 8
  •   suppression: Attr: 0.8003, Corr: 0.5972
  •   enhancement: Attr: 0.8055, Corr: 0.5683
  •   control: Attr: 0.8087, Corr: 0.7072
[17:28:47] 
INSTRUCT Layer 16
  •   suppression: Attr: 0.7899, Corr: 0.6082
  •   enhancement: Attr: 0.7918, Corr: 0.5680
  •   control: Attr: 0.7883, Corr: 0.7088
[17:29:45] 
INSTRUCT Layer 24
  •   suppression: Attr: 0.8271, Corr: 0.5962
  •   enhancement: Attr: 0.8376, Corr: 0.5720
  •   control: Attr: 0.8340, Corr: 0.7205

================================================================================
CREATING VISUALIZATIONS
================================================================================
[17:30:44] ✓ Saved probe accuracies plot
[17:30:45] ✓ Saved cross-model transfer plot
[17:30:46] ✓ Saved group-wise performance plot
[17:30:46] ✓ Saved transfer rate heatmap

================================================================================
GENERATING SUMMARY REPORT
================================================================================
[17:30:46] ✓ Summary report saved
[17:30:46] ✓ Label encoders saved

================================================================================
PIPELINE COMPLETE
================================================================================
[17:30:46] End time: 2025-11-18 17:30:46
[17:30:46] Total duration: 52.2 minutes
[17:30:46] 
All outputs saved to:
[17:30:46]   /home/anshulk/cultural-alignment-study/outputs/linear_probing/v2
